<!DOCTYPE html>
<html lang="en">
<head>
</head>
<body onload="loadImageFile();">
    <form id="contact" name="contact">
            <input placeholder="Your Email Address" id="email" type="email" tabindex="2" required>
            <input placeholder="Width" type="text" id="width" tabindex="1" required autofocus>
            <input placeholder="Height" type="text" id="height" tabindex="1" required autofocus>
            <input placeholder="Upload Image" id="image" type="file" tabindex="3" onchange="loadImageFile();" >
        <button name="submit" type="submit" id="contact-submit">Submit</button>
    </form>
    <a href="statistics.html" >Users Page</a>
    <p>Origal Img - <img id="original-Img"/></p>
    <p>Compress Img - <img id="upload-Preview"/></p>
<script type="text/javascript">
    document.getElementById("contact").addEventListener("submit", function (e) {
            e.preventDefault();
            let request = new XMLHttpRequest();

            request.onload = () => {
                if (request.status >= 200 && request.status < 300) {
                    alert("success");
                }
            };

            request.open('POST', 'https://8hc3y6szt7.execute-api.eu-central-1.amazonaws.com/v1/postImg');
            request.setRequestHeader("Access-Control-Allow-Origin", "*");

            const json = JSON.stringify({
                email: document.getElementById("email").value,
                width: document.getElementById("width").value,
                height: document.getElementById("height").value
            });

            request.setRequestHeader('Content-type', 'application/json; charset=utf-8');
            request.send(json);

            document.getElementById("contact").reset();

        }
    );
</script>
<script type="text/javascript" src="scriptImg.js"></script>

</body>
</html>